<div class="reservas-container container">

  <!-- Breadcrumb -->
  <nav class="breadcrumb">
    <a routerLink="/">Início</a> /
    <a routerLink="/usuario">Usuário</a> /
    <span>Reserva</span>
  </nav>

  <h2>Faça sua reserva</h2>

  <!-- Barra de busca (apenas visual) -->
  <div class="search-row mb-3">
    <input type="text" placeholder="Digite o nome do livro ou autor" class="search-bar" />
    <a routerLink="/emprestimos" class="emprestimos-icon" title="Ir para Meus Empréstimos">
      <i class="bi bi-journal-bookmark"></i>
    </a>
  </div>

  <div class="reserva-content d-flex">

    <!-- Lista de livros -->
    <div class="lista-livros flex-grow-1">
      <div *ngFor="let livro of livros" class="livro-card mb-3">
        <div class="info d-flex">
          <img src="assets/placeholder.png" alt="capa" class="capa me-3" />
          <div>
            <h3>{{ livro.titulo }}</h3>
            <p class="autor">{{ livro.autor }}</p>
            <p class="status" [ngClass]="livro.status">{{ livro.status | titlecase }}</p>
          </div>
        </div>

        <div class="acoes mt-2 d-flex gap-2">
          <button *ngIf="livro.status === 'DISPONIVEL'" (click)="reservar(livro)" class="btn btn-success">Reservar</button>
          <button *ngIf="livro.status === 'INDISPONIVEL'" (click)="entrarNaFila(livro)" class="btn btn-warning">Entrar na fila</button>
          <button *ngIf="livroReservado === livro" (click)="cancelar()" class="btn btn-danger">Cancelar</button>
        </div>
      </div>

      <div class="mt-3">
        <a routerLink="/emprestimos" class="btn btn-dark">
          <i class="bi bi-journal-bookmark me-2"></i> Meus Empréstimos
        </a>
      </div>
    </div>

    <!-- Resumo da reserva -->
    <aside class="resumo ms-4 p-3 border rounded">
      <h4>Resumo da Reserva</h4>

      <div *ngIf="livroReservado; else vazio">
        <img src="assets/placeholder.png" alt="capa" class="mini-capa mb-2" />
        <p><b>{{ livroReservado.titulo }}</b></p>
        <p>Autor: {{ livroReservado.autor }}</p>
        <p>Edição: {{ livroReservado.edicao }}</p>
        <p>Idioma: {{ livroReservado.idioma }}</p>
        <p>Páginas: {{ livroReservado.paginas }}</p>
        <p><strong>Retirada:</strong> 22 de agosto de 2025</p>
        <p><strong>Devolução:</strong> 29 de agosto de 2025</p>
        <p><strong>Fila de Espera:</strong> 0º na fila</p>

        <div class="mt-3">
          <strong>Regras para reserva</strong>
          <ul>
            <li>Prazo para retirada: 48 horas</li>
            <li>Limite de reservas por usuário: xx</li>
            <li>Cancelamento automático em caso de não retirada</li>
          </ul>
        </div>

        <button class="btn btn-success w-100 mt-2" (click)="confirmarReserva()">Confirmar</button>
      </div>

      <ng-template #vazio>
        <p>Nenhum livro reservado.</p>
      </ng-template>
    </aside>

  </div>

  <!-- Mensagem de sucesso -->
  <div *ngIf="reservaEfetuada" class="alert alert-success mt-4">
    <i class="bi bi-check-circle-fill me-2"></i> Reserva efetuada com sucesso!
  </div>

  <!-- Mensagem de erro -->
  <div *ngIf="erro" class="alert alert-danger mt-4">
    <i class="bi bi-exclamation-triangle-fill me-2"></i> {{ erro }}
  </div>

</div>
